(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),o=t(3),a=t(1),u=t(0),i=function(e){var n=e.text,t=e.value,c=e.onChange;return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:n})," ",Object(u.jsx)("input",{value:t,onChange:c})]})},s=function(e){var n=e.addPerson,t=e.name,c=e.handleNameChange,r=e.number,o=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsx)(i,{text:"Name",value:t,onChange:c}),Object(u.jsx)(i,{text:"Number",value:r,onChange:o}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){var n=e.person,t=e.removePerson;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:n.name}),Object(u.jsx)("td",{children:n.number}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:t,children:"Delete"})})]})},l=function(e){var n=e.persons,t=e.filter,c=e.remove;return Object(u.jsx)("table",{children:Object(u.jsx)("thead",{children:n.filter((function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1})).map((function(e){return Object(u.jsx)(d,{person:e,removePerson:c(e.id)},e.name)}))})})},h=function(e){var n=e.value,t=e.onChange;return Object(u.jsx)("form",{children:Object(u.jsx)(i,{Item:!0,text:"Filter by name",value:n,onChange:t})})},b=function(e){var n=e.message,t=e.type;return null===n?null:Object(u.jsx)("div",{className:t,children:n})},j=t(4),f=t.n(j),m="/api/persons",O=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),d=i[0],j=i[1],f=Object(a.useState)(""),m=Object(o.a)(f,2),g=m[0],C=m[1],k=Object(a.useState)(""),y=Object(o.a)(k,2),w=y[0],N=y[1],P=Object(a.useState)(null),S=Object(o.a)(P,2),D=S[0],A=S[1],E=Object(a.useState)(null),T=Object(o.a)(E,2),F=T[0],I=T[1],J=function(e,n){var t=5e3;"critical"===n&&(t=3e4),A(e),I(n),setTimeout((function(){A(null)}),t)};Object(a.useEffect)((function(){return O().then((function(e){c(e)})).catch((function(e){J("Couldn't connect to backend service. Please try again later.","critical")}))}),[]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(b,{message:D,type:F}),Object(u.jsx)(h,{value:w,onChange:function(e){return N(e.target.value)}}),Object(u.jsx)("h2",{children:"Add Entry"}),Object(u.jsx)(s,{addPerson:function(e){e.preventDefault();var n={name:d,number:g},r=t.find((function(e){return e.name===d}));if(r)return window.confirm("The name '".concat(d,"' is already added to phonebook. Would you like to replace the old number with the new one?"))&&v(r.id,n).then((function(e){c(t.map((function(n){return n.id!==r.id?n:e}))),J("Updated '".concat(d,"' in the phonebook."),"success")})).catch((function(e){J("Couldn't update '".concat(d,"'."),"error")})),void J("Didn't update '".concat(d,"' in the phonebook.'"),"error");t.some((function(e){return e.number===g}))?J("The phone number ".concat(g," is already added to phonebook"),"error"):p(n).then((function(e){c(t.concat(e)),j(""),C(""),J("Added '".concat(d,"' to the phonebook.'"),"success")})).catch((function(e){J("Couldn't add '".concat(d,"'."),"critical")}))},name:d,handleNameChange:function(e){return j(e.target.value)},number:g,handleNumberChange:function(e){return C(e.target.value)}}),Object(u.jsx)("h2",{children:"Directory"}),Object(u.jsx)(l,{persons:t,filter:w,remove:function(e){var n=t.find((function(n){return n.id===e}));return function(){x(e).then((function(r){c(t.filter((function(n){return n.id!==e}))),J("Removed '".concat(n.name,"' from the phonebook.'"),"success")})).catch((function(e){e.response?J("".concat(n.name," doesn't exist or was already removed from the phonebook."),"error"):e.request&&J("Couldn't find the backend service. Please try again later.","critical")}))}}})]})};t(38);r.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a789faeb.chunk.js.map